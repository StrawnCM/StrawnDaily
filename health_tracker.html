<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Metrics Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
    const HealthTracker = () => {
      const [entries, setEntries] = React.useState([]);
      const [newEntry, setNewEntry] = React.useState({
        calories: '',
        exercise: '',
        bedtime: '22:00'
      });

      const getCalorieScore = (calories) => {
        if (calories <= 1800) return 100;
        if (calories <= 2500) return 80 - ((calories - 1800) / 700) * 30;
        if (calories <= 3000) return 50 - ((calories - 2500) / 500) * 30;
        return Math.max(0, 20 - ((calories - 3000) / 500) * 20);
      };

      const getExerciseScore = (minutes) => {
        if (minutes >= 60) return 100;
        if (minutes >= 30) return 70 + (minutes - 30) * 1;
        if (minutes >= 15) return 40 + (minutes - 15) * 2;
        return minutes * 2.67;
      };

      const getBedtimeScore = (bedtime) => {
        const [hours, minutes] = bedtime.split(':').map(Number);
        const totalMinutes = hours * 60 + minutes;
        if (hours >= 22) {
          const pmMinutes = totalMinutes - 1320;
          if (pmMinutes <= 0) return 100;
          return Math.max(50, 100 - (pmMinutes / 150) * 50);
        } else if (hours <= 6) {
          if (totalMinutes <= 30) {
            return Math.max(50, 100 - ((totalMinutes + 120) / 150) * 50);
          }
          return Math.max(0, 50 - ((totalMinutes - 30) / 360) * 50);
        }
        return 30;
      };

      const getColorFromScore = (score) => {
        if (score >= 80) return '#22c55e';
        if (score >= 60) return '#84cc16';
        if (score >= 40) return '#eab308';
        if (score >= 20) return '#f97316';
        return '#ef4444';
      };

      const calculateDailyScore = (entry) => {
        const calorieScore = getCalorieScore(entry.calories);
        const exerciseScore = getExerciseScore(entry.exercise);
        const bedtimeScore = getBedtimeScore(entry.bedtime);
        return Math.round((calorieScore + exerciseScore + bedtimeScore) / 3);
      };

      const getOverallScore = () => {
        if (entries.length === 0) return 0;
        const totalScore = entries.reduce((sum, entry) => sum + calculateDailyScore(entry), 0);
        return Math.round(totalScore / entries.length);
      };

      const addEntry = () => {
        if (!newEntry.calories || !newEntry.exercise) return;
        const entry = {
          id: Date.now(),
          date: new Date().toLocaleDateString(),
          calories: parseInt(newEntry.calories),
          exercise: parseInt(newEntry.exercise),
          bedtime: newEntry.bedtime
        };
        setEntries([entry, ...entries]);
        setNewEntry({ calories: '', exercise: '', bedtime: '22:00' });
      };

      const formatBedtime = (bedtime) => {
        const [hours, minutes] = bedtime.split(':');
        const hour12 = hours % 12 || 12;
        const period = hours >= 12 ? 'PM' : 'AM';
        return `${hour12}:${minutes} ${period}`;
      };

      const overallScore = getOverallScore();

      return (
        <div className="max-w-4xl mx-auto p-6 bg-gray-50 min-h-screen">
          <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 className="text-3xl font-bold text-gray-800 mb-2">Health Metrics Tracker</h1>
            <p className="text-gray-600 mb-6">Track your daily calories, exercise, and sleep schedule with color-coded scoring</p>
            <div className="bg-gradient-to-r from-gray-100 to-gray-200 rounded-lg p-6 mb-6">
              <div className="flex items-center justify-between">
                <div>
                  <h2 className="text-xl font-semibold text-gray-800 mb-2">Overall Health Score</h2>
                  <p className="text-gray-600">Based on {entries.length} day{entries.length !== 1 ? 's' : ''} of data</p>
                </div>
                <div className="text-center">
                  <div className="w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-xl shadow-lg" style={{ backgroundColor: getColorFromScore(overallScore) }}>{overallScore}</div>
                  <div className="mt-2 text-sm font-medium text-gray-700">
                    {overallScore >= 80 ? 'Excellent' : overallScore >= 60 ? 'Good' : overallScore >= 40 ? 'Fair' : overallScore >= 20 ? 'Poor' : 'Critical'}
                  </div>
                </div>
              </div>
            </div>
            <div className="bg-blue-50 rounded-lg p-6 mb-6">
              <h3 className="text-lg font-semibold text-gray-800 mb-4">Add Today's Entry</h3>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Calories Consumed</label>
                  <input type="number" value={newEntry.calories} onChange={(e) => setNewEntry({ ...newEntry, calories: e.target.value })} className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 2000" />
                  <div className="mt-1 text-xs text-gray-500">Green: â‰¤1800 | Yellow: 2500-3000 | Red: >3000</div>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Exercise Minutes</label>
                  <input type="number" value={newEntry.exercise} onChange={(e) => setNewEntry({ ...newEntry, exercise: e.target.value })} className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 45" />
                  <div className="mt-1 text-xs text-gray-500">More minutes = better score</div>
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Bedtime</label>
                  <input type="time" value={newEntry.bedtime} onChange={(e) => setNewEntry({ ...newEntry, bedtime: e.target.value })} className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" />
                  <div className="mt-1 text-xs text-gray-500">Green: 10PM | Yellow: 10PM-12:30AM | Red: >12:30AM</div>
                </div>
              </div>
              <button onClick={addEntry} className="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium">Add Entry</button>
            </div>
            <div className="bg-gray-100 rounded-lg p-4 mb-6">
              <h3 className="font-semibold text-gray-800 mb-3">Scoring System</h3>
              <div className="grid grid-cols-5 gap-2 text-center text-sm">
                <div className="bg-green-500 text-white rounded p-2 font-medium">Excellent<br />80-100</div>
                <div className="bg-lime-500 text-white rounded p-2 font-medium">Good<br />60-79</div>
                <div className="bg-yellow-500 text-white rounded p-2 font-medium">Fair<br />40-59</div>
                <div className="bg-orange-500 text-white rounded p-2 font-medium">Poor<br />20-39</div>
                <div className="bg-red-500 text-white rounded p-2 font-medium">Critical<br />0-19</div>
              </div>
            </div>
          </div>
          {entries.length > 0 && (
            <div className="bg-white rounded-lg shadow-lg p-6">
              <h3 className="text-xl font-semibold text-gray-800 mb-4">Daily Entries</h3>
              <div className="space-y-4">
                {entries.map((entry) => {
                  const dailyScore = calculateDailyScore(entry);
                  const calorieScore = getCalorieScore(entry.calories);
                  const exerciseScore = getExerciseScore(entry.exercise);
                  const bedtimeScore = getBedtimeScore(entry.bedtime);
                  return (
                    <div key={entry.id} className="border border-gray-200 rounded-lg p-4">
                      <div className="flex items-center justify-between mb-3">
                        <div className="font-medium text-gray-800">{entry.date}</div>
                        <div className="w-12 h-12 rounded-full flex items-center justify-center text-white font-bold shadow-md" style={{ backgroundColor: getColorFromScore(dailyScore) }}>{dailyScore}</div>
                      </div>
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div className="flex items-center justify-between">
                          <div>
                            <div className="text-sm text-gray-600">Calories</div>
                            <div className="font-medium">{entry.calories}</div>
                          </div>
                          <div className="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium" style={{ backgroundColor: getColorFromScore(calorieScore) }}>{Math.round(calorieScore)}</div>
                        </div>
                        <div className="flex items-center justify-between">
                          <div>
                            <div className="text-sm text-gray-600">Exercise</div>
                            <div className="font-medium">{entry.exercise} min</div>
                          </div>
                          <div className="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium" style={{ backgroundColor: getColorFromScore(exerciseScore) }}>{Math.round(exerciseScore)}</div>
                        </div>
                        <div className="flex items-center justify-between">
                          <div>
                            <div className="text-sm text-gray-600">Bedtime</div>
                            <div className="font-medium">{formatBedtime(entry.bedtime)}</div>
                          </div>
                          <div className="w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium" style={{ backgroundColor: getColorFromScore(bedtimeScore) }}>{Math.round(bedtimeScore)}</div>
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          )}
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<HealthTracker />);
    </script>
</body>
</html>
